<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EHBO Epilepsie Training - BHV Zuid-Holland</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, rgb(68,83,134), rgb(88,103,154));
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
            max-width: 900px;
            width: 100%;
            overflow: hidden;
            animation: slideIn 0.8s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header {
            background: linear-gradient(45deg, rgb(68,83,134), rgb(88,103,154));
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .logo-container {
            position: absolute;
            top: 15px;
            right: 20px;
            background: white;
            padding: 8px 15px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .bhv-logo {
            font-family: 'Arial Black', Arial, sans-serif;
            font-weight: 900;
            font-size: 14px;
            letter-spacing: -0.5px;
            line-height: 1;
        }

        .logo-yellow {
            color: rgb(216,174,41);
        }

        .logo-blue {
            color: rgb(68,83,134);
        }

        .logo-tagline {
            font-size: 6px;
            color: rgb(216,174,41);
            font-weight: normal;
            letter-spacing: 1px;
            margin-top: 2px;
        }

        .header h1 {
            font-size: 2.3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .difficulty-badge {
            background: rgba(255,255,255,0.2);
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .stats-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            background: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 1.6em;
            font-weight: bold;
            display: block;
        }

        .content {
            padding: 30px;
        }

        .progress-container {
            background: #e9ecef;
            height: 10px;
            border-radius: 5px;
            margin-bottom: 25px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(45deg, rgb(216,174,41), rgb(206,164,31));
            height: 100%;
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .scenario {
            background: #f8f9fa;
            border-left: 5px solid rgb(68,83,134);
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .scenario h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .scenario-text {
            color: #2c3e50;
            line-height: 1.7;
            margin-bottom: 25px;
            font-size: 1.1em;
            background: white;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid rgb(216,174,41);
        }

        .options {
            display: grid;
            gap: 12px;
        }

        .option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.05em;
        }

        .option:hover:not(.disabled) {
            border-color: rgb(68,83,134);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(68,83,134,0.15);
        }

        .option.correct {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            border-color: #28a745;
        }

        .option.incorrect {
            background: linear-gradient(45deg, #dc3545, #fd7e14);
            color: white;
            border-color: #dc3545;
        }

        .option.disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 12px;
            font-weight: 500;
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .feedback.correct {
            background: linear-gradient(45deg, #d4edda, #c3e6cb);
            border: 2px solid #28a745;
            color: #155724;
        }

        .feedback.incorrect {
            background: linear-gradient(45deg, #f8d7da, #f5c6cb);
            border: 2px solid #dc3545;
            color: #721c24;
        }

        .next-btn {
            background: linear-gradient(45deg, rgb(68,83,134), rgb(58,73,124));
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(68,83,134,0.4);
        }

        .timer {
            color: rgb(216,174,41);
            font-weight: bold;
        }

        .timer.warning {
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .final-score {
            text-align: center;
            padding: 40px;
        }

        .final-score h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            font-size: 2.5em;
            font-weight: bold;
            color: white;
        }

        .excellent { background: linear-gradient(45deg, rgb(68,83,134), rgb(58,73,124)); }
        .good { background: linear-gradient(45deg, rgb(216,174,41), rgb(206,164,31)); }
        .needs-improvement { background: linear-gradient(45deg, rgb(158,173,214), rgb(138,153,194)); }

        .restart-btn {
            background: linear-gradient(45deg, #6c757d, #495057);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
        }

        .bhv-certification {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid rgb(68,83,134);
        }

        .cert-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .cert-logo-box {
            background: white;
            padding: 8px 12px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        @media (max-width: 768px) {
            .stats-board {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <div class="logo-container">
                <div class="bhv-logo">
                    <div><span class="logo-yellow">✚</span></div>
                    <div><span class="logo-yellow">BHV</span></div>
                    <div><span class="logo-blue">ZUID-HOLLAND</span></div>
                    <div class="logo-tagline">VEILIGHEID GEEFT ZEKERHEID</div>
                </div>
            </div>
            <h1>🚑 EHBO Training: Epilepsie</h1>
            <div class="difficulty-badge">⚡ Gevorderd Niveau</div>
            <div class="stats-board">
                <div class="stat-item">
                    <span class="stat-number" id="current-score">0</span>
                    <span>Punten</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="current-question">1</span>
                    <span>van <span id="total-questions">10</span></span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="accuracy">100%</span>
                    <span>Nauwkeurigheid</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number timer" id="timer">90</span>
                    <span>seconden</span>
                </div>
            </div>
        </div>

        <div class="content">
            <div class="progress-container">
                <div class="progress-fill" id="progress"></div>
            </div>

            <div id="game-content">
                <!-- Scenarios worden hier geladen -->
            </div>
        </div>
    </div>

    <script>
        const scenarios = [
            {
                title: "Tonisch-klonische aanval op kantoor",
                text: "Je collega valt plotseling om en krijgt heftige schokken door het hele lichaam. Hij is niet aanspreekbaar en maakt rochelige geluiden. Er staat een bureau met scherpe hoeken vlakbij. Wat is je EERSTE prioriteit?",
                options: [
                    "De persoon beschermen tegen letsel door gevaarlijke objecten weg te halen",
                    "Direct 112 bellen voor een ambulance",
                    "Proberen de tong vast te houden zodat hij niet stikt",
                    "Water geven zodra de aanval stopt"
                ],
                correct: 0,
                explanation: "✅ Correct! De eerste prioriteit is het voorkomen van letsel. Haal gevaarlijke objecten weg en zorg voor een veilige omgeving. 112 bellen doe je daarna, en NOOIT iets in de mond stoppen!"
            },
            {
                title: "Status epilepticus situatie",
                text: "Een bekende van je met epilepsie heeft een tonisch-klonische aanval die al 8 minuten duurt. Er is nog geen ambulance gebeld. Hij ademt moeilijk en wordt blauw rond de lippen. Wat is nu cruciaal?",
                options: [
                    "Wachten tot de aanval stopt, dat gebeurt meestal vanzelf",
                    "Koud water over zijn gezicht gieten om hem bij bewustzijn te brengen",
                    "Direct 112 bellen - dit is een levensbedreigende noodsituatie",
                    "Zijn medicijnen zoeken en die in zijn mond stoppen"
                ],
                correct: 2,
                explanation: "✅ Correct! Een aanval langer dan 5 minuten is status epilepticus - een medisch noodgeval dat directe ziekenhuisbehandeling vereist. De zuurstoftekort (blauwverkleuring) bevestigt de ernst."
            },
            {
                title: "Focale aanval in de supermarkt",
                text: "Een klant staart voor zich uit, maakt herhaaldelijk smakkende bewegingen met de mond en plukt aan zijn kleding. Hij reageert niet op aanspreken maar staat wel rechtop. De aanval duurt al 3 minuten. Wat doe je?",
                options: [
                    "Kalm tegen hem praten, zacht de arm aanraken en voorzichtig begeleiden van gevaar weg",
                    "Hem beetpakken en door elkaar schudden om hem bij bewustzijn te krijgen",
                    "Direct 112 bellen omdat elke aanval een noodgeval is",
                    "Afwachten tot het vanzelf overgaat, aanvallen zijn altijd ongevaarlijk"
                ],
                correct: 0,
                explanation: "✅ Juist! Bij een focale aanval blijft de persoon vaak staan maar heeft verminderd bewustzijn. Praat kalm, voorkom gevaar en dwing niets. Bij aanvallen langer dan 5 minuten wel 112 bellen."
            },
            {
                title: "Postictale fase management",
                text: "Na een 2 minuten durende tonisch-klonische aanval ligt iemand bewusteloos op zijn zij. Hij ademt normaal maar reageert niet. Zijn vrouw wil hem rechtop zetten en water geven. Wat adviseer je?",
                options: [
                    "Hem direct rechtop zetten zodat hij beter kan ademen",
                    "Direct mond-op-mondbeademing geven",
                    "Hem in de stabiele zijligging laten en ruimte geven om bij te komen",
                    "Ammonia onder zijn neus houden om hem sneller wakker te maken"
                ],
                correct: 2,
                explanation: "✅ Perfect! In de postictale fase is de persoon verward en heeft tijd nodig. Stabiele zijligging, niet forceren, en wachten tot hij natuurlijk bijkomt. Geen eten of drinken tot volledig bij bewustzijn."
            },
            {
                title: "Medicatie-gerelateerd scenario",
                text: "Je kent iemand met epilepsie die zegt al 3 dagen zijn anti-epileptica niet te hebben genomen omdat hij zich zo moe voelde. Hij vraagt of dat erg is. Wat zeg je?",
                options: [
                    "Geen probleem, medicijnen maken inderdaad moe, beter even stoppen",
                    "Direct contact opnemen met huisarts/neuroloog - abrupt stoppen verhoogt aanvalrisico dramatisch",
                    "Vanaf morgen weer beginnen, dan komt het goed",
                    "Medicijnen zijn eigenlijk overbodig als je al lang geen aanval hebt gehad"
                ],
                correct: 1,
                explanation: "✅ Uitstekend! Abrupt stoppen met anti-epileptica kan levensgevaarlijke doorbraak-aanvallen veroorzaken. Altijd medisch advies inwinnen bij medicatieproblemen. Dosering mag nooit zomaar gewijzigd worden."
            },
            {
                title: "Eerste hulp prioriteiten",
                text: "Bij een tonisch-klonische aanval in een zwembad: de persoon is uit het water gehaald en ligt bewusteloos op de kant. Wat is de juiste volgorde van handelen?",
                options: [
                    "Reanimatie → stabiele zijligging → 112 bellen",
                    "Direct 112 → afwachten → medicijnen geven",
                    "Mond leegmaken → kunstmatige beademing → hartmassage",
                    "Ademhaling controleren → indien afwezig reanimatie → anders stabiele zijligging → 112"
                ],
                correct: 3,
                explanation: "✅ Perfect! ABC-regel: eerst vitale functies checken. Als hart/ademhaling stoppen: reanimeren. Anders: stabiele zijligging voor veilige ademhaling. Verdrinking + epilepsie vereist extra waakzaamheid."
            },
            {
                title: "Rijbewijs en veiligheid",
                text: "Iemand die 2 jaar aanvalvrij was, heeft vorige week een doorbraak-aanval gehad. Hij vraagt of hij morgen weer mag rijden voor zijn werk. Wat antwoord je?",
                options: [
                    "Rijden is tijdelijk verboden - moet melding maken bij CBR en neuroloog raadplegen",
                    "Omdat hij zo lang aanvalvrij was, mag hij direct weer rijden",
                    "Alleen korte ritjes mogen, geen snelweg",
                    "Met medicijnen mag hij direct weer rijden"
                ],
                correct: 0,
                explanation: "✅ Juist! Na elke aanval geldt opnieuw een rijverbod. In Nederland moet je het CBR informeren en meestal 6-12 maanden aanvalvrij zijn. Veiligheid van hemzelf en anderen staat voorop."
            },
            {
                title: "Provocatiefactoren herkenning",
                text: "Een student vertelt dat hij gisteren een aanval heeft gehad na een nacht doorhalen voor tentamens, veel koffie en alcohol. Vandaag heeft hij hoofdpijn en wil weer koffie. Wat is je advies?",
                options: [
                    "Meer koffie is goed voor de hoofdpijn",
                    "Het was toeval, de triggers hebben niets met epilepsie te maken",
                    "Alleen de alcohol was het probleem, de rest mag wel",
                    "Waarschuwen voor clustertriggering: slaaptekort + cafeïne + alcohol + stress verhogen aanvalrisico sterk"
                ],
                correct: 3,
                explanation: "✅ Correct! Je herkent de multiple triggers: slaaptekort, stress, alcohol en cafeïne. Deze kunnen in combinatie aanvallen uitlokken. Rust, regelmatige slaap en hydratatie zijn nu prioriteit."
            },
            {
                title: "Werkplek aanpassingen",
                text: "Een collega met epilepsie werkt bij een machine met roterende delen. Hij heeft maandelijks lichte focale aanvallen waarbij hij even 'weg is'. De werkgever vraagt jouw mening. Wat adviseer je?",
                options: [
                    "Geen probleem, focale aanvallen zijn niet gevaarlijk",
                    "Alleen 's ochtends laten werken als hij uitgerust is",
                    "Risicoanalyse maken en mogelijk andere werkplek - zelfs korte bewustzijnsverlies bij machines is risicovol",
                    "Medicijnen verhogen zodat aanvallen stoppen"
                ],
                correct: 2,
                explanation: "✅ Uitstekend! Zelfs korte bewustzijnsverlies bij gevaarlijke machines is een groot risico. Bedrijfsarts en risicoanalyse zijn nodig voor een veilige werkomgeving voor iedereen."
            },
            {
                title: "Complexe differentaaldiagnose",
                text: "Een oudere man 'valt om' tijdens inspanning. Familie zegt dat hij kort schokte, maar hij heeft geen verwardheid achteraf en geen incontinentie. Hij is wel duizelig. Hartslag 110. Wat denk je?",
                options: [
                    "Duidelijk een epileptische aanval, naar neuroloog verwijzen",
                    "Mogelijk hartritme-stoornis of flauwvallen - cardiale evaluatie prioriteit bij ouderen",
                    "Psychogene aanval, geen medische interventie nodig",
                    "Hypoglykemie, direct suiker geven"
                ],
                correct: 1,
                explanation: "✅ Scherp! Bij ouderen zijn hartproblemen als oorzaak van flauwvallen frequenter dan epilepsie. Inspanningsgebonden flauwte + snelle hartslag + geen verwardheid achteraf wijzen naar hartproblemen. ECG door de ambulance en cardiale evaluatie eerst."
            }
        ];

        let currentScenario = 0;
        let score = 0;
        let correctAnswers = 0;
        let timer = 90;
        let timerInterval;
        let gameActive = true;

        function startTimer() {
            clearInterval(timerInterval);
            timer = 90;
            timerInterval = setInterval(() => {
                timer--;
                document.getElementById('timer').textContent = timer;
                
                if (timer <= 15) {
                    document.getElementById('timer').classList.add('warning');
                } else {
                    document.getElementById('timer').classList.remove('warning');
                }
                
                if (timer <= 0) {
                    clearInterval(timerInterval);
                    handleTimeout();
                }
            }, 1000);
        }

        function handleTimeout() {
            if (!gameActive) return;
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                option.classList.add('disabled');
                if (index === scenarios[currentScenario].correct) {
                    option.classList.add('correct');
                }
            });

            showFeedback(false, "⏰ Tijd verstreken! " + scenarios[currentScenario].explanation);
            gameActive = false;
        }

        function loadScenario() {
            gameActive = true;
            startTimer();
            
            const scenario = scenarios[currentScenario];
            const gameContent = document.getElementById('game-content');
            
            document.getElementById('current-question').textContent = currentScenario + 1;
            document.getElementById('total-questions').textContent = scenarios.length;
            updateProgress();
            updateAccuracy();
            
            gameContent.innerHTML = `
                <div class="scenario">
                    <h3>${scenario.title}</h3>
                    <div class="scenario-text">${scenario.text}</div>
                    <div class="options">
                        ${scenario.options.map((option, index) => `
                            <div class="option" data-index="${index}" onclick="selectOption(${index})">
                                ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div class="feedback" id="feedback"></div>
                    <button class="next-btn" id="next-btn" onclick="nextScenario()" style="display: none;">
                        ${currentScenario < scenarios.length - 1 ? 'Volgende Scenario →' : 'Resultaten Bekijken'}
                    </button>
                </div>
            `;
        }

        function selectOption(selectedIndex) {
            if (!gameActive) return;
            
            clearInterval(timerInterval);
            gameActive = false;
            
            const scenario = scenarios[currentScenario];
            const options = document.querySelectorAll('.option');
            const isCorrect = selectedIndex === scenario.correct;
            
            options.forEach((option, index) => {
                option.classList.add('disabled');
                if (index === scenario.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex && !isCorrect) {
                    option.classList.add('incorrect');
                }
            });
            
            if (isCorrect) {
                correctAnswers++;
                score += timer > 60 ? 100 : timer > 30 ? 80 : timer > 10 ? 60 : 40;
            }
            
            document.getElementById('current-score').textContent = score;
            updateAccuracy();
            showFeedback(isCorrect, scenario.explanation);
        }

        function showFeedback(isCorrect, explanation) {
            const feedback = document.getElementById('feedback');
            feedback.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            feedback.innerHTML = explanation;
            feedback.style.display = 'block';
            document.getElementById('next-btn').style.display = 'block';
        }

        function nextScenario() {
            currentScenario++;
            if (currentScenario < scenarios.length) {
                loadScenario();
            } else {
                showFinalScore();
            }
        }

        function updateProgress() {
            const progress = ((currentScenario) / scenarios.length) * 100;
            document.getElementById('progress').style.width = progress + '%';
        }

        function updateAccuracy() {
            if (currentScenario === 0) {
                document.getElementById('accuracy').textContent = '100%';
            } else {
                const accuracy = Math.round((correctAnswers / currentScenario) * 100);
                document.getElementById('accuracy').textContent = accuracy + '%';
            }
        }

        function showFinalScore() {
            clearInterval(timerInterval);
            const maxScore = scenarios.length * 100;
            const percentage = Math.round((score / maxScore) * 100);
            const accuracy = Math.round((correctAnswers / scenarios.length) * 100);
            
            let scoreClass, scoreText;
            if (percentage >= 80) {
                scoreClass = 'excellent';
                scoreText = 'Uitstekend! 🏆';
            } else if (percentage >= 60) {
                scoreClass = 'good';
                scoreText = 'Goed gedaan! 👍';
            } else {
                scoreClass = 'needs-improvement';
                scoreText = 'Blijf oefenen! 📚';
            }
            
            document.querySelector('.content').innerHTML = `
                <div class="final-score">
                    <h2>Training Voltooid!</h2>
                    <div class="score-circle ${scoreClass}">
                        ${percentage}%
                    </div>
                    <h3>${scoreText}</h3>
                    <p style="margin: 20px 0; font-size: 1.2em; color: #495057;">
                        Je hebt <strong>${score}</strong> van de <strong>${maxScore}</strong> punten behaald<br>
                        <strong>${correctAnswers}</strong> van de <strong>${scenarios.length}</strong> vragen goed (${accuracy}% nauwkeurigheid)
                    </p>
                    <div class="bhv-certification">
                        <div class="cert-logo">
                            <div class="cert-logo-box">
                                <div class="bhv-logo">
                                    <div><span class="logo-yellow">✚</span></div>
                                    <div><span class="logo-yellow">BHV</span></div>
                                    <div><span class="logo-blue">ZUID-HOLLAND</span></div>
                                    <div class="logo-tagline">VEILIGHEID GEEFT ZEKERHEID</div>
                                </div>
                            </div>
                            <div style="color: rgb(68,83,134); font-weight: bold;">
                                Gecertificeerde EHBO Training Voltooid
                            </div>
                        </div>
                    </div>
                    <p style="margin-bottom: 30px; color: #6c757d;">
                        ${percentage >= 80 ? 'Je beheerst de EHBO bij epilepsie uitstekend!' : 
                          percentage >= 60 ? 'Goede basis, blijf oefenen met de moeilijkere scenario\'s!' :
                          'Bestudeer de materialen opnieuw en probeer het nog eens!'}
                    </p>
                    <button class="restart-btn" onclick="restartGame()">🔄 Opnieuw Spelen</button>
                </div>
            `;
        }

        function restartGame() {
            currentScenario = 0;
            score = 0;
            correctAnswers = 0;
            document.getElementById('current-score').textContent = score;
            loadScenario();
        }

        // Start het spel
        loadScenario();
    </script>
</body>
</html>